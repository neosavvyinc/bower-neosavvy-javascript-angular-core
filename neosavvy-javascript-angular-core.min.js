/*! neosavvy-javascript-angular-core - v0.1.0 - 2013-09-27
* Copyright (c) 2013 Neosavvy, Inc.; Licensed  */
var Neosavvy=Neosavvy||{};Neosavvy.AngularCore=Neosavvy.AngularCore||{},Neosavvy.AngularCore.Directives=angular.module("neosavvy.angularcore.directives",[]),Neosavvy.AngularCore.Filters=angular.module("neosavvy.angularcore.filters",[]),Neosavvy.AngularCore.Services=angular.module("neosavvy.angularcore.services",[]),Neosavvy.AngularCore.Directives.directive("nsInlineHtml",["$compile",function(a){return{restrict:"E",template:"<div></div>",replace:!0,scope:!1,link:function(b,c,d){var e=d.value||!1;if(!e)throw"You must provide an html value on the scope in order to bind inline html!";var f=b.$watch(e,function(d){d&&(c.replaceWith(a(angular.element(d))(b)),f())})}}}]),Neosavvy.AngularCore.Directives.directive("nsStaticInclude",["$http","$templateCache","$compile",function(a,b,c){return{restrict:"E",template:"<div></div>",replace:!0,scope:!1,compile:function(d,e){if(_.isEmpty(e.src))throw"You must pass in a source to render a Neosavvy static include directive.";var f=e.waitFor,g=e.watchWaitFor,h=e.waitForRender,i=e.watchWaitForRender;return _.isEmpty(f)&&_.isEmpty(g)&&(a.get(e.src,{cache:b}),_.isEmpty(i)?_.isEmpty(h)||(f=h):g=i),function(d,e,h){var i,j=function(a){e.replaceWith(c(angular.element(a.data))(d))},k=function(){a.get(h.src,{cache:b}).then(j),i&&i()};_.isEmpty(g)?!_.isEmpty(f)&&parseFloat(f)>0?setTimeout(k,parseFloat(f)):k():i=d.$watch(g,k)}}}}]),Neosavvy.AngularCore.Directives.directive("nsEvent",["$rootScope",function(){return{restrict:"A",scope:!1,link:function(a,b,c){function d(a){return a.match(/.*?(?=\(|$)/i)[0]}function e(a,b){if(_.isUndefined(a[d(b)])){if(a.$parent)return e(a.$parent,b);throw"Your handler method has not been found in the scope chain, please add "+b+" to the scope chain!"}return a}function f(b){var c=e(a,g[1]);c.$event=b,c.$apply(g[1])}var g=c.nsEvent.replace(/ /g,"").split(","),h=_.isUndefined(c.nsEventHighPriority)?!1:!0;if(g.length<2)throw"Specify and event and handler in order to use the ns-event directive!";if(2===g.length)h?b.bindFirst(g[0],f):b.bind(g[0],f);else for(var i=2;i<g.length;i++){var j=$(b).find(g[i]);h?j.bindFirst(g[0],f):j.bind(g[0],f)}}}}]),Neosavvy.AngularCore.Directives.directive("nsModelOnblur",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){"radio"!==c.type&&"checkbox"!==c.type&&(b.unbind("input").unbind("keydown").unbind("change"),b.bind("blur",function(){a.$apply(function(){d.$setViewValue(b.val())})}))}}}),Neosavvy.AngularCore.Services.factory("nsServiceExtensions",["$q","$http",function(a,b){function c(){}function d(){}return{request:function(c,d,e){if(!c.method)throw"You must provide a method for each service request.";if(!c.url)throw"You must provide a url for each service request.";var f=a.defer();return b(c).success(function(a){f.resolve(a),d&&d(a)}).error(function(a){f.reject(a),e&&e(a)}),f.promise},xhr:function(a){if(!a.method)throw"You must provide a method for each service request.";if(!a.url)throw"You must provide a url for each service request.";var b=Q.defer(),e=new XMLHttpRequest,f=c(a);f?b.resolve(f):(e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var c=e.responseText;d(a,e.status,c),a.transformResponse?c=a.transformResponse(c):"application/json"===e.getResponseHeader("Content-Type")&&(c=JSON.parse(c)),b.resolve(c,e.status,e.getAllResponseHeaders())}else b.reject(c,e.status,e.getAllResponseHeaders())},e.onerror=function(){b.reject(e,e.status,e.getAllResponseHeaders())},a.data,a.transformRequest)}}}]);